<!DOCTYPE html>
<html lang="en" x-data="{ 
  sidebarOpen: false, 
  darkMode: localStorage.getItem('darkMode') === 'true',
  sidebarCollapsed: localStorage.getItem('sidebarCollapsed') === 'true',
  activeMenu: null
}" x-init="
  $watch('darkMode', val => {
    localStorage.setItem('darkMode', val);
    document.documentElement.classList.toggle('dark', val);
  });
  $watch('sidebarCollapsed', val => localStorage.setItem('sidebarCollapsed', val));
  if (darkMode) {
    document.documentElement.classList.add('dark');
  }
" :class="{ 'dark': darkMode }">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DIU Sun Light Admin Console</title>

  <!-- Essential CSS & JS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            'sidebar-blue': '#034ea2',
            'table-blue': '#2E3094',
            'dark-primary': '#22246f',
            'dark-secondary': '#2c2ea3',
            'dark-accent': '#3a3ccf',
            'table-bg': '#F7F9FB',
            'edit-green': '#39b54a',
            'delete-red': '#c9252c',
          },
          fontFamily: {
            'roboto': ['Roboto', 'sans-serif'],
          }
        }
      }
    }
  </script>
  
  <style>
    body {
      font-family: 'Roboto', sans-serif;
    }
    
    /* Sidebar collapse transitions */
    .sidebar-transition {
      transition: width 0.3s ease;
    }
    
    .text-transition {
      transition: opacity 0.2s ease;
    }
    
    .tooltip {
      position: relative;
    }
    
    .tooltip .tooltip-text {
      visibility: hidden;
      width: max-content;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 4px;
      padding: 5px 10px;
      position: absolute;
      z-index: 1;
      left: 100%;
      top: 50%;
      transform: translateY(-50%);
      margin-left: 8px;
      opacity: 0;
      transition: opacity 0.3s;
      white-space: nowrap;
    }
    
    .tooltip:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }
    
    /* Submenu styling for collapsed mode */
    .menu-item-wrapper {
      position: relative;
    }
    
    .submenu-collapsed {
      position: fixed;
      left: 64px; /* Match collapsed sidebar width */
      background: white;
      border-radius: 0 8px 8px 0;
      box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1);
      z-index: 45;
      min-width: 200px;
      max-height: 70vh;
      overflow-y: auto;
      border: 1px solid #e5e7eb;
      border-left: none;
    }
    
    .dark .submenu-collapsed {
      background: #2c2ea3;
      border-color: #3a3ccf;
      color: #e4e6ff;
    }
    
    .submenu-item {
      padding: 10px 16px;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: background-color 0.2s;
      border-bottom: 1px solid #f3f4f6;
      white-space: nowrap;
    }
    
    .dark .submenu-item {
      border-bottom-color: #3a3ccf;
      color: #e4e6ff;
    }
    
    .submenu-item:last-child {
      border-bottom: none;
    }
    
    .submenu-item:hover {
      background-color: #f3f4f6;
    }
    
    .dark .submenu-item:hover {
      background-color: #3a3ccf;
    }
    
    .submenu-item .material-symbols-outlined {
      margin-right: 12px;
      font-size: 18px;
    }
    
    /* Hide scrollbar but allow scrolling for main sidebar */
    .no-scrollbar {
      -ms-overflow-style: none; /* IE and Edge */
      scrollbar-width: none; /* Firefox */
    }
    
    .no-scrollbar::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }
    
    /* Active menu indicator */
    .active-menu-indicator {
      position: absolute;
      right: -8px;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 20px;
      background-color: #6366f1;
      border-radius: 2px;
    }

    /* Dark mode specific styles with #22246f color */
    .dark {
      color-scheme: dark;
    }
    
    .dark .bg-gray-50 {
      background-color: #111827;
    }
    
    .dark .bg-white {
      background-color: #22246f !important;
    }
    
    .dark .bg-gray-800 {
      background-color: #22246f !important;
    }
    
    .dark .bg-gray-700 {
      background-color: #2c2ea3 !important;
    }
    
    .dark .text-gray-800 {
      color: #f9fafb;
    }
    
    .dark .border-gray-200 {
      border-color: #3a3ccf;
    }
    
    .dark .border-gray-700 {
      border-color: #3a3ccf;
    }
    
    .dark .border-gray-100 {
      border-color: #3a3ccf;
    }
    
    .dark .bg-gray-100 {
      background-color: #2c2ea3;
    }
    
    .dark .text-gray-600 {
      color: #e4e6ff;
    }
    
    .dark .text-gray-700 {
      color: #e4e6ff;
    }
    
    .dark .text-gray-200 {
      color: #e4e6ff;
    }
    
    .dark .text-gray-300 {
      color: #e4e6ff;
    }
    
    .dark .text-gray-400 {
      color: #c7c9ff;
    }
    
    .dark .hover\:text-indigo-500:hover {
      color: #a5b4fc;
    }
    
    .dark .hover\:bg-indigo-900\/40:hover {
      background-color: #2c2ea3 !important;
    }
    
    .dark .hover\:bg-gray-700:hover {
      background-color: #2c2ea3 !important;
    }
    
    /* Custom hover effects for dark mode */
    .dark .hover\:bg-indigo-50:hover {
      background-color: #2c2ea3 !important;
    }

    /* KPI Table Styles */
    .progress-bar {
      height: 6px;
      border-radius: 3px;
      background-color: #e5e7eb;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      transition: width 0.3s ease;
    }

    .comment-section {
      position: relative;
    }

    .comment-input {
      width: 100%;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      padding: 6px;
      font-size: 0.75rem;
      resize: vertical;
      min-height: 50px;
    }

    .send-btn {
      background-color: #2E3094;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 6px 12px;
      font-size: 0.8rem;
      cursor: pointer;
      margin-top: 8px;
    }

    .send-btn:hover {
      background-color: #1e2074;
    }

    .score-input {
      width: 100%;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      padding: 3px;
      font-size: 0.75rem;
    }

    .table-container {
      overflow-x: auto;
    }

    .compact-table th,
    .compact-table td {
      padding: 6px 8px !important;
    }

    .action-btn {
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.7rem;
      margin-right: 4px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .details-btn {
      background-color: #2E3094;
      color: white;
      border: none;
    }

    .details-btn:hover {
      background-color: #1e2074;
    }

    .kra-cell {
      background-color: #F7F9FB;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: white;
      border-radius: 8px;
      width: 95%;
      max-width: 1400px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .monthly-progress-table {
      font-size: 0.75rem;
    }

    .monthly-progress-table th,
    .monthly-progress-table td {
      padding: 4px 6px !important;
    }

    .status-badge {
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 500;
    }

    .status-pending {
      background-color: #fef3c7;
      color: #92400e;
    }

    .status-approved {
      background-color: #d1fae5;
      color: #065f46;
    }

    .status-sent-back {
      background-color: #fee2e2;
      color: #991b1b;
    }

    .dark .status-pending {
      background-color: #451a03;
      color: #fbbf24;
    }

    .dark .status-approved {
      background-color: #064e3b;
      color: #34d399;
    }

    .dark .status-sent-back {
      background-color: #7f1d1d;
      color: #f87171;
    }

    @media (max-width: 768px) {
      .table-container table {
        font-size: 0.7rem;
      }

      .compact-table th,
      .compact-table td {
        padding: 4px 6px !important;
      }
      
      .action-btn {
        display: block;
        width: 100%;
        margin-bottom: 4px;
      }
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 transition-colors duration-300" x-data="{}" @click="activeMenu = null">

<div class="flex h-screen overflow-hidden">

  <!-- Sidebar -->
  <aside class="fixed inset-y-0 left-0 z-40 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 sidebar-transition
           md:translate-x-0"
        :class="sidebarCollapsed ? 'w-16' : 'w-64'"
        :class="{ '-translate-x-full': !sidebarOpen && window.innerWidth < 768 }"
        @click.stop>

    <!-- Logo -->
    <div class="flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700">
      <div class="flex items-center">
        <h1 class="text-lg font-bold text-indigo-600 dark:text-indigo-300"
            :class="sidebarCollapsed ? 'hidden' : 'block'">DIU Sun Light</h1>
        <button
                @click="sidebarCollapsed = !sidebarCollapsed; activeMenu = null;"
                class="ml-2 text-gray-600 dark:text-gray-300 hover:text-indigo-500 p-1 rounded"
                :title="sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'">
          <span class="material-symbols-outlined"
                x-text="sidebarCollapsed ? 'chevron_right' : 'chevron_left'"></span>
        </button>
      </div>
      <button class="md:hidden text-gray-600 dark:text-gray-300" @click="sidebarOpen = false">âœ•</button>
    </div>

    <!-- Navigation -->
    <nav class="overflow-y-auto p-4 space-y-2 no-scrollbar">

      <!-- Dashboard -->
      <div class="menu-item-wrapper">
        <a href="index.html"
           class="flex items-center px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 tooltip relative"
           :class="{ 'bg-indigo-50 dark:bg-gray-700': activeMenu === 'dashboard' }">
          <span class="material-symbols-outlined mr-3">dashboard</span>
          <span class="text-transition"
                :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">Dashboard</span>
          <span class="tooltip-text" x-show="sidebarCollapsed">Dashboard</span>
          <div class="active-menu-indicator" x-show="sidebarCollapsed && activeMenu === 'dashboard'"></div>
        </a>
      </div>

      <!-- User Management -->
      <div x-data="{ open: false }" class="menu-item-wrapper">
        <button
                @click="if (sidebarCollapsed) {
          activeMenu = activeMenu === 'user-management' ? null : 'user-management';
        } else { 
          open = !open; 
        }"
                class="flex items-center justify-between w-full px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 tooltip relative"
                :class="{ 'bg-indigo-50 dark:bg-gray-700': activeMenu === 'user-management' }">
          <div class="flex items-center">
            <span class="material-symbols-outlined mr-3">group</span>
            <span class="text-transition" :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">User Management</span>
          </div>
          <span class="material-symbols-outlined text-sm transition-transform"
                :class="open ? 'rotate-180' : ''"
                x-show="!sidebarCollapsed">expand_more</span>
          <span class="tooltip-text" x-show="sidebarCollapsed">User Management</span>
          <div class="active-menu-indicator"
               x-show="sidebarCollapsed && activeMenu === 'user-management'"></div>
        </button>

        <!-- Expanded Mode Submenu -->
        <div x-show="open && !sidebarCollapsed" x-collapse class="pl-10 mt-1 space-y-1">
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">person</span> Users
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">admin_panel_settings</span> Roles
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">history</span> Audit Logs
          </a>
        </div>

        <!-- Collapsed Mode Submenu -->
        <div x-show="sidebarCollapsed && activeMenu === 'user-management'"
             class="submenu-collapsed"
             :style="`top: ${$el.parentElement.offsetTop}px;`"
             @click.stop>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">person</span>
            Users
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">admin_panel_settings</span>
            Roles
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">history</span>
            Audit Logs
          </div>
        </div>
      </div>

      <!-- HR & Attendance -->
      <div x-data="{ open: false }" class="menu-item-wrapper">
        <button
                @click="if (sidebarCollapsed) {
          activeMenu = activeMenu === 'hr-attendance' ? null : 'hr-attendance';
        } else { 
          open = !open; 
        }"
                class="flex items-center justify-between w-full px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 tooltip relative"
                :class="{ 'bg-indigo-50 dark:bg-gray-700': activeMenu === 'hr-attendance' }">
          <div class="flex items-center">
            <span class="material-symbols-outlined mr-3">calendar_month</span>
            <span class="text-transition" :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">HR & Attendance</span>
          </div>
          <span class="material-symbols-outlined text-sm transition-transform"
                :class="open ? 'rotate-180' : ''"
                x-show="!sidebarCollapsed">expand_more</span>
          <span class="tooltip-text" x-show="sidebarCollapsed">HR & Attendance</span>
          <div class="active-menu-indicator"
               x-show="sidebarCollapsed && activeMenu === 'hr-attendance'"></div>
        </button>

        <!-- Expanded Mode Submenu -->
        <div x-show="open && !sidebarCollapsed" x-collapse class="pl-10 mt-1 space-y-1">
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">badge</span> Employees
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">schedule</span> Attendance
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">timer</span> Overtime
          </a>
        </div>

        <!-- Collapsed Mode Submenu -->
        <div x-show="sidebarCollapsed && activeMenu === 'hr-attendance'"
             class="submenu-collapsed"
             :style="`top: ${$el.parentElement.offsetTop}px;`"
             @click.stop>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">badge</span>
            Employees
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">schedule</span>
            Attendance
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">timer</span>
            Overtime
          </div>
        </div>
      </div>

      <!-- ePMS -->
      <div x-data="{ open: false }" class="menu-item-wrapper">
        <button
                @click="if (sidebarCollapsed) {
          activeMenu = activeMenu === 'epms' ? null : 'epms';
        } else { 
          open = !open; 
        }"
                class="flex items-center justify-between w-full px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 tooltip relative"
                :class="{ 'bg-indigo-50 dark:bg-gray-700': activeMenu === 'epms' }">
          <div class="flex items-center">
            <span class="material-symbols-outlined mr-3">assignment</span>
            <span class="text-transition"
                  :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">ePMS</span>
          </div>
          <span class="material-symbols-outlined text-sm transition-transform"
                :class="open ? 'rotate-180' : ''"
                x-show="!sidebarCollapsed">expand_more</span>
          <span class="tooltip-text" x-show="sidebarCollapsed">ePMS</span>
          <div class="active-menu-indicator" x-show="sidebarCollapsed && activeMenu === 'epms'"></div>
        </button>

        <!-- Expanded Mode Submenu -->
        <div x-show="open && !sidebarCollapsed" x-collapse class="pl-10 mt-1 space-y-1">
          <a href="kpiAssign.html"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">task</span> KPI Assign
          </a>
          <a href="myKpi.html"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">trending_up</span> My KPI
          </a>
          <a href="kpiReview.html"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">target</span> KPI Review
          </a>
        </div>

        <!-- Collapsed Mode Submenu -->
        <div x-show="sidebarCollapsed && activeMenu === 'epms'"
             class="submenu-collapsed"
             :style="`top: ${$el.parentElement.offsetTop}px;`"
             @click.stop>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">task</span>
            KPI Assign
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">trending_up</span>
            My KPI
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">target</span>
            KPI Review
          </div>
        </div>
      </div>

      <!-- Payroll -->
      <div x-data="{ open: false }" class="menu-item-wrapper">
        <button
                @click="if (sidebarCollapsed) {
          activeMenu = activeMenu === 'payroll' ? null : 'payroll';
        } else { 
          open = !open; 
        }"
                class="flex items-center justify-between w-full px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 tooltip relative"
                :class="{ 'bg-indigo-50 dark:bg-gray-700': activeMenu === 'payroll' }">
          <div class="flex items-center">
            <span class="material-symbols-outlined mr-3">payments</span>
            <span class="text-transition" :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">Payroll</span>
          </div>
          <span class="material-symbols-outlined text-sm transition-transform"
                :class="open ? 'rotate-180' : ''"
                x-show="!sidebarCollapsed">expand_more</span>
          <span class="tooltip-text" x-show="sidebarCollapsed">Payroll</span>
          <div class="active-menu-indicator" x-show="sidebarCollapsed && activeMenu === 'payroll'"></div>
        </button>

        <!-- Expanded Mode Submenu -->
        <div x-show="open && !sidebarCollapsed" x-collapse class="pl-10 mt-1 space-y-1">
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">receipt</span> Salary Processing
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">request_quote</span> Payslips
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">savings</span> Tax Management
          </a>
        </div>

        <!-- Collapsed Mode Submenu -->
        <div x-show="sidebarCollapsed && activeMenu === 'payroll'"
             class="submenu-collapsed"
             :style="`top: ${$el.parentElement.offsetTop}px;`"
             @click.stop>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">receipt</span>
            Salary Processing
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">request_quote</span>
            Payslips
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">savings</span>
            Tax Management
          </div>
        </div>
      </div>

      <!-- Leave -->
      <div x-data="{ open: false }" class="menu-item-wrapper">
        <button
                @click="if (sidebarCollapsed) {
          activeMenu = activeMenu === 'leave' ? null : 'leave';
        } else { 
          open = !open; 
        }"
                class="flex items-center justify-between w-full px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 tooltip relative"
                :class="{ 'bg-indigo-50 dark:bg-gray-700': activeMenu === 'leave' }">
          <div class="flex items-center">
            <span class="material-symbols-outlined mr-3">beach_access</span>
            <span class="text-transition"
                  :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">Leave</span>
          </div>
          <span class="material-symbols-outlined text-sm transition-transform"
                :class="open ? 'rotate-180' : ''"
                x-show="!sidebarCollapsed">expand_more</span>
          <span class="tooltip-text" x-show="sidebarCollapsed">Leave</span>
          <div class="active-menu-indicator" x-show="sidebarCollapsed && activeMenu === 'leave'"></div>
        </button>

        <!-- Expanded Mode Submenu -->
        <div x-show="open && !sidebarCollapsed" x-collapse class="pl-10 mt-1 space-y-1">
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">event_available</span> Apply Leave
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">pending_actions</span> Leave Requests
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">calendar_today</span> Leave Calendar
          </a>
        </div>

        <!-- Collapsed Mode Submenu -->
        <div x-show="sidebarCollapsed && activeMenu === 'leave'"
             class="submenu-collapsed"
             :style="`top: ${$el.parentElement.offsetTop}px;`"
             @click.stop>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">event_available</span>
            Apply Leave
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">pending_actions</span>
            Leave Requests
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">calendar_today</span>
            Leave Calendar
          </div>
        </div>
      </div>

      <!-- Visit -->
      <div x-data="{ open: false }" class="menu-item-wrapper">
        <button
                @click="if (sidebarCollapsed) {
          activeMenu = activeMenu === 'visit' ? null : 'visit';
        } else { 
          open = !open; 
        }"
                class="flex items-center justify-between w-full px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 tooltip relative"
                :class="{ 'bg-indigo-50 dark:bg-gray-700': activeMenu === 'visit' }">
          <div class="flex items-center">
            <span class="material-symbols-outlined mr-3">travel_explore</span>
            <span class="text-transition"
                  :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">Visit</span>
          </div>
          <span class="material-symbols-outlined text-sm transition-transform"
                :class="open ? 'rotate-180' : ''"
                x-show="!sidebarCollapsed">expand_more</span>
          <span class="tooltip-text" x-show="sidebarCollapsed">Visit</span>
          <div class="active-menu-indicator" x-show="sidebarCollapsed && activeMenu === 'visit'"></div>
        </button>

        <!-- Expanded Mode Submenu -->
        <div x-show="open && !sidebarCollapsed" x-collapse class="pl-10 mt-1 space-y-1">
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">person_search</span> Visitor Registration
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">meeting_room</span> Meeting Rooms
          </a>
          <a href="#"
             class="flex items-center text-sm py-1 hover:text-indigo-500 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-outlined mr-2 text-base">schedule</span> Visit Schedule
          </a>
        </div>

        <!-- Collapsed Mode Submenu -->
        <div x-show="sidebarCollapsed && activeMenu === 'visit'"
             class="submenu-collapsed"
             :style="`top: ${$el.parentElement.offsetTop}px;`"
             @click.stop>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">person_search</span>
            Visitor Registration
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">meeting_room</span>
            Meeting Rooms
          </div>
          <div class="submenu-item" @click="activeMenu = null">
            <span class="material-symbols-outlined">schedule</span>
            Visit Schedule
          </div>
        </div>
      </div>

      <!-- Reports -->
      <div class="menu-item-wrapper">
        <a href="#"
           class="flex items-center px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 tooltip relative"
           :class="{ 'bg-indigo-50 dark:bg-gray-700': activeMenu === 'reports' }">
          <span class="material-symbols-outlined mr-3">bar_chart</span>
          <span class="text-transition"
                :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">Reports</span>
          <span class="tooltip-text" x-show="sidebarCollapsed">Reports</span>
          <div class="active-menu-indicator" x-show="sidebarCollapsed && activeMenu === 'reports'"></div>
        </a>
      </div>

      <!-- Settings -->
      <div class="menu-item-wrapper">
        <a href="#"
           class="flex items-center px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 tooltip relative"
           :class="{ 'bg-indigo-50 dark:bg-gray-700': activeMenu === 'settings' }">
          <span class="material-symbols-outlined mr-3">settings</span>
          <span class="text-transition"
                :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">Settings</span>
          <span class="tooltip-text" x-show="sidebarCollapsed">Settings</span>
          <div class="active-menu-indicator" x-show="sidebarCollapsed && activeMenu === 'settings'"></div>
        </a>
      </div>
    </nav>

    <!-- Footer -->
    <div class="border-t border-gray-200 dark:border-gray-700 p-4">
      <button class="flex items-center w-full text-gray-700 dark:text-gray-200 tooltip">
        <span class="material-symbols-outlined mr-2">logout</span>
        <span class="text-transition" :class="sidebarCollapsed ? 'opacity-0 w-0' : 'opacity-100'">Logout</span>
        <span class="tooltip-text" x-show="sidebarCollapsed">Logout</span>
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col sidebar-transition" :class="sidebarCollapsed ? 'md:ml-16' : 'md:ml-64'">

    <!-- Top Navbar -->
    <header
            class="flex items-center justify-between bg-white dark:bg-gray-800 shadow-sm px-4 py-3 sticky top-0 z-30 border-b border-gray-100 dark:border-gray-700">
      <div class="flex items-center gap-2">
        <button @click="sidebarOpen = !sidebarOpen" class="md:hidden text-gray-600 dark:text-gray-300">
          â˜°
        </button>
        <input type="text" placeholder="Search..."
               class="hidden md:block px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm outline-none"/>
      </div>

      <!-- Right Actions -->
      <div class="flex items-center gap-4">
        <!-- Dark Mode Toggle -->
        <button @click="darkMode = !darkMode" class="text-gray-600 dark:text-gray-300 hover:text-indigo-500">
          <span x-show="!darkMode" class="material-symbols-outlined">light_mode</span>
          <span x-show="darkMode" class="material-symbols-outlined">dark_mode</span>
        </button>

        <!-- Notifications -->
        <button class="text-gray-600 dark:text-gray-300 hover:text-indigo-500">
          <span class="material-symbols-outlined">notifications</span>
        </button>

        <!-- Admin Dropdown -->
        <div x-data="{ open: false, role: 'Admin' }" class="relative">
          <button @click="open = !open" @mouseenter="open = true" @mouseleave="open = false"
                  class="flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:text-indigo-500">
            ðŸ‘¤ <span>Admin</span>
          </button>

          <!-- Dropdown -->
          <div x-show="open" x-transition @mouseenter="open = true" @mouseleave="open = false"
               class="absolute right-0 mt-2 w-44 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2">
            <div class="px-3 py-2 border-b border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200">
              Role: <span class="font-medium text-indigo-500" x-text="role"></span>
            </div>
            <a href="#" class="block px-3 py-2 text-sm hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200">Profile</a>
            <a href="#"
               class="block px-3 py-2 text-sm hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200">Settings</a>
            <a href="#" class="block px-3 py-2 text-sm hover:bg-indigo-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200">Logout</a>
          </div>
        </div>
      </div>
    </header>
    
    <!-- Main Content Area -->
    <main class="flex-1 overflow-x-hidden overflow-y-auto p-4 lg:p-6">
      <!-- Employee Information Table -->
      <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden mb-6">
        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
          <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">Employee Information</h3>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full compact-table">
            <thead>
            <tr class="bg-table-blue text-white">
              <th class="px-3 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Employee ID</th>
              <th class="px-3 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Employee Name</th>
              <th class="px-3 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Category</th>
              <th class="px-3 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Department</th>
            </tr>
            </thead>
            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
            <tr>
              <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                710003896</td>
              <td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200 border-r border-gray-200 dark:border-gray-700">
                Fazlul Alam</td>
              <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                Admin</td>
              <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                Software Section</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- KPI Content -->
      <div id="kpisContent" class="tab-content">
        <!-- Table -->
        <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
          <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">Key Performance Indicator</h3>
          </div>

          <div class="table-container">
            <table class="min-w-full compact-table" id="kpiTable">
              <thead>
              <tr class="bg-table-blue text-white">
                <th rowspan="2" width="3%"
                    class="px-2 py-2 text-center text-xs font-medium uppercase tracking-wider border-l border-r border-blue-500">
                  SL</th>
                <th rowspan="2" width="10%"
                    class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-l border-r border-blue-500">
                  KRA</th>
                <th width="15%"
                    class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                  KPI</th>
                <th width="6%"
                    class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                  Weightage</th>
                <th width="8%"
                    class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                  Target Description</th>
                <th width="8%"
                    class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                  Target</th>
                <th width="8%"
                    class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                  Achievement</th>
                <th width="8%"
                    class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                  Achievement (%)</th>
                <th width="8%"
                    class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                  Score</th>
                <th width="5%"
                    class="px-2 py-2 text-center text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                  â‹®</th>
              </tr>
              </thead>
              <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700" id="kpiTableBody">
              <!-- Performance KRA -->
              <tr class="kpi-row saved" data-kra-id="1">
                <td rowspan="3" class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 align-top border-l border-r border-gray-200 dark:border-gray-700 text-center kra-cell">
                  <div class="flex items-center justify-center h-full">
                    1
                  </div>
                </td>
                <td rowspan="3" class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 align-top border-l border-r border-gray-200 dark:border-gray-700 text-left kra-cell">
                  <div class="h-full">
                    Performance
                  </div>
                </td>
                <td class="px-2 py-2 text-sm font-medium text-gray-900 dark:text-gray-200 border-b border-r border-gray-200 dark:border-gray-700">
                  Revenue Growth
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  30</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  Increase revenue by 15%</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  15</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <input type="text" class="score-input dark:bg-gray-700 dark:text-gray-200" value="14">
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <div class="flex items-center">
                    <div class="progress-bar w-full">
                      <div class="progress-fill bg-green-600" style="width: 93%"></div>
                    </div>
                    <span class="ml-1 text-xs">93%</span>
                  </div>
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  27.9
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700 text-center">
                  <button class="action-btn details-btn" data-kpi-id="1">
                    Details
                  </button>
                </td>
              </tr>
              <tr class="kpi-row saved" data-kra-id="1">
                <td class="px-2 py-2 text-sm font-medium text-gray-900 dark:text-gray-200 border-b border-r border-gray-200 dark:border-gray-700">
                  Cost Reduction
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  25</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  Reduce operational costs by 10%</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  10</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <input type="text" class="score-input dark:bg-gray-700 dark:text-gray-200" value="9">
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <div class="flex items-center">
                    <div class="progress-bar w-full">
                      <div class="progress-fill bg-green-600" style="width: 90%"></div>
                    </div>
                    <span class="ml-1 text-xs">90%</span>
                  </div>
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  22.5
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700 text-center">
                  <button class="action-btn details-btn" data-kpi-id="2">
                    Details
                  </button>
                </td>
              </tr>
              <tr class="kpi-row saved" data-kra-id="1">
                <td class="px-2 py-2 text-sm font-medium text-gray-900 dark:text-gray-200 border-b border-r border-gray-200 dark:border-gray-700">
                  Profit Margin
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  20</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  Achieve 22% profit margin</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  22</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <input type="text" class="score-input dark:bg-gray-700 dark:text-gray-200" value="21">
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <div class="flex items-center">
                    <div class="progress-bar w-full">
                      <div class="progress-fill bg-green-600" style="width: 95%"></div>
                    </div>
                    <span class="ml-1 text-xs">95%</span>
                  </div>
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  19
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700 text-center">
                  <button class="action-btn details-btn" data-kpi-id="3">
                    Details
                  </button>
                </td>
              </tr>

              <!-- Customer Satisfaction KRA -->
              <tr class="kpi-row saved" data-kra-id="2">
                <td rowspan="2" class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 align-top border-l border-r border-gray-200 dark:border-gray-700 text-center kra-cell">
                  <div class="flex items-center justify-center h-full">
                    2
                  </div>
                </td>
                <td rowspan="2" class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 align-top border-l border-r border-gray-200 dark:border-gray-700 text-left kra-cell">
                  <div class="h-full">
                    Customer Satisfaction
                  </div>
                </td>
                <td class="px-2 py-2 text-sm font-medium text-gray-900 dark:text-gray-200 border-b border-r border-gray-200 dark:border-gray-700">
                  NPS Score
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  15</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  Financial reporting process documentation</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  N/A</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <select class="score-input dark:bg-gray-700 dark:text-gray-200">
                    <option value="5">Excellent</option>
                    <option value="4" selected>Very Good</option>
                    <option value="3">Good</option>
                    <option value="2">Average</option>
                  </select>
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <div class="flex items-center">
                    <div class="progress-bar w-full">
                      <div class="progress-fill bg-green-600" style="width: 100%"></div>
                    </div>
                    <span class="ml-1 text-xs">100%</span>
                  </div>
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  15
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700 text-center">
                  <button class="action-btn details-btn" data-kpi-id="4">
                    Details
                  </button>
                </td>
              </tr>
              <tr class="kpi-row saved" data-kra-id="2">
                <td class="px-2 py-2 text-sm font-medium text-gray-900 dark:text-gray-200 border-b border-r border-gray-200 dark:border-gray-700">
                  Customer Retention
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  10</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  Maintain customer retention rate of 85%</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  85</td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <input type="text" class="score-input dark:bg-gray-700 dark:text-gray-200" value="82">
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  <div class="flex items-center">
                    <div class="progress-bar w-full">
                      <div class="progress-fill bg-green-600" style="width: 96%"></div>
                    </div>
                    <span class="ml-1 text-xs">96%</span>
                  </div>
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700">
                  9.6
                </td>
                <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-r border-gray-200 dark:border-gray-700 text-center">
                  <button class="action-btn details-btn" data-kpi-id="5">
                    Details
                  </button>
                </td>
              </tr>
              </tbody>
              <tfoot>
              <tr class="weightage-total">
                <td colspan="3" class="px-2 py-2 text-right font-medium dark:text-gray-200">Total Weightage:</td>
                <td id="totalWeightage" class="px-2 py-2 text-center font-medium dark:text-gray-200">100</td>
                <td colspan="4" class="px-2 py-2 text-center">
                  <span id="weightageStatus" class="text-sm text-green-600"></span>
                </td>
                <td class="px-2 py-2 text-center font-medium dark:text-gray-200">94</td>
              </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- KPI Review Modal -->
<div id="kpiReviewModal" class="modal">
  <div class="modal-content dark:bg-gray-800 dark:text-gray-200">
    <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
      <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">KPI Review</h3>
      <button id="closeModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>
    <div class="p-4">
      <!-- KPI Details Table -->
      <div class="mb-6">
        <h4 class="text-md font-semibold text-gray-700 dark:text-gray-200 mb-2">KPI Details</h4>
        <div class="overflow-x-auto">
          <table class="min-w-full compact-table">
            <thead>
            <tr class="bg-table-blue text-white">
              <th class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                KRA/KPI</th>
              <th class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Weightage</th>
              <th class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Target Details</th>
              <th class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Target</th>
              <th class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Achievement</th>
              <th class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Achievement (%)</th>
              <th class="px-2 py-2 text-left text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Score</th>
            </tr>
            </thead>
            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700" id="modalKpiDetails">
            <!-- KPI details will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Monthly Progress Table -->
      <div class="mb-6">
        <h4 class="text-md font-semibold text-gray-700 dark:text-gray-200 mb-2">Monthly Progress</h4>
        <div class="overflow-x-auto">
          <table class="min-w-full compact-table monthly-progress-table">
            <thead>
            <tr class="bg-table-blue text-white">
              <th class="px-2 py-2 text-center text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Month</th>
              <th class="px-2 py-2 text-center text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Achievements</th>
              <th class="px-2 py-2 text-center text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                URL</th>
              <th class="px-2 py-2 text-center text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Employee Comments</th>
              <th class="px-2 py-2 text-center text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Supervisor Comments</th>
              <th class="px-2 py-2 text-center text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Third Eye Comments</th>
              <th class="px-2 py-2 text-center text-xs font-medium uppercase tracking-wider border-r border-blue-500">
                Status</th>
            </tr>
            </thead>
            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700" id="monthlyProgress">
              <!-- Monthly progress will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // KPI data for the modal
  const kpiData = {
    1: {
      kra: "Performance",
      kpi: "Revenue Growth",
      weightage: "30",
      targetDetails: "Increase revenue by 15%",
      target: "15",
      achievement: "14",
      achievementPercent: "93%",
      score: "27.9",
      isTargeted: true,
      monthlyData: {
        january: { achievement: "12", url: "https://company.com/evidence/jan-revenue", employeeComments: "Good progress this month, met most targets.", supervisorComments: "", thirdEyeComments: "Performance is satisfactory for this period.", status: "pending" },
        february: { achievement: "13", url: "https://company.com/evidence/feb-revenue", employeeComments: "Completed all assigned tasks ahead of schedule.", supervisorComments: "", thirdEyeComments: "Performance exceeded expectations this month.", status: "approved" },
        march: { achievement: "14", url: "https://company.com/evidence/mar-revenue", employeeComments: "Faced some challenges but managed to meet targets.", supervisorComments: "", thirdEyeComments: "Performance was adequate considering the challenges.", status: "pending" },
        april: { achievement: "13", url: "https://company.com/evidence/apr-revenue", employeeComments: "Slight dip due to market conditions.", supervisorComments: "", thirdEyeComments: "Acceptable performance given external factors.", status: "sent-back" },
        may: { achievement: "14", url: "https://company.com/evidence/may-revenue", employeeComments: "Recovered well from previous month.", supervisorComments: "", thirdEyeComments: "Good recovery, showing improvement.", status: "pending" },
        june: { achievement: "15", url: "https://company.com/evidence/jun-revenue", employeeComments: "Exceeded target this month.", supervisorComments: "", thirdEyeComments: "Excellent performance, exceeded expectations.", status: "approved" },
        july: { achievement: "14", url: "https://company.com/evidence/jul-revenue", employeeComments: "Maintained strong performance despite seasonal challenges.", supervisorComments: "", thirdEyeComments: "Consistent performance during challenging period.", status: "approved" },
        august: { achievement: "15", url: "https://company.com/evidence/aug-revenue", employeeComments: "Achieved target with new client acquisitions.", supervisorComments: "", thirdEyeComments: "Excellent work on business development.", status: "approved" },
        september: { achievement: "16", url: "https://company.com/evidence/sep-revenue", employeeComments: "Exceeded targets with successful product launch.", supervisorComments: "", thirdEyeComments: "Outstanding results from new product initiative.", status: "approved" },
        october: { achievement: "15", url: "https://company.com/evidence/oct-revenue", employeeComments: "Maintained high performance levels.", supervisorComments: "", thirdEyeComments: "Consistent delivery of results.", status: "approved" },
        november: { achievement: "14", url: "https://company.com/evidence/nov-revenue", employeeComments: "Slight seasonal adjustment but still strong.", supervisorComments: "", thirdEyeComments: "Good performance considering seasonal trends.", status: "pending" },
        december: { achievement: "16", url: "https://company.com/evidence/dec-revenue", employeeComments: "Ended year with record performance.", supervisorComments: "", thirdEyeComments: "Excellent year-end performance.", status: "approved" }
      }
    },
    2: {
      kra: "Performance",
      kpi: "Cost Reduction",
      weightage: "25",
      targetDetails: "Reduce operational costs by 10%",
      target: "10",
      achievement: "9",
      achievementPercent: "90%",
      score: "22.5",
      isTargeted: true,
      monthlyData: {
        january: { achievement: "8", url: "https://company.com/evidence/jan-cost", employeeComments: "Implemented new cost-saving measures.", supervisorComments: "", thirdEyeComments: "Good initiative on cost reduction.", status: "approved" },
        february: { achievement: "9", url: "https://company.com/evidence/feb-cost", employeeComments: "Cost reduction measures showing results.", supervisorComments: "", thirdEyeComments: "Effective cost management.", status: "approved" },
        march: { achievement: "8", url: "https://company.com/evidence/mar-cost", employeeComments: "Some unexpected expenses this month.", supervisorComments: "", thirdEyeComments: "Understandable given the circumstances.", status: "pending" },
        april: { achievement: "9", url: "https://company.com/evidence/apr-cost", employeeComments: "Back on track with cost reduction.", supervisorComments: "", thirdEyeComments: "Good recovery on cost control.", status: "approved" },
        may: { achievement: "9", url: "https://company.com/evidence/may-cost", employeeComments: "Maintaining cost reduction targets.", supervisorComments: "", thirdEyeComments: "Consistent performance.", status: "approved" },
        june: { achievement: "10", url: "https://company.com/evidence/jun-cost", employeeComments: "Achieved full cost reduction target.", supervisorComments: "", thirdEyeComments: "Excellent achievement on cost control.", status: "approved" },
        july: { achievement: "9", url: "https://company.com/evidence/jul-cost", employeeComments: "Maintained cost efficiency despite increased activity.", supervisorComments: "", thirdEyeComments: "Good cost management during busy period.", status: "approved" },
        august: { achievement: "10", url: "https://company.com/evidence/aug-cost", employeeComments: "Optimized vendor contracts for better rates.", supervisorComments: "", thirdEyeComments: "Excellent negotiation skills demonstrated.", status: "approved" },
        september: { achievement: "9", url: "https://company.com/evidence/sep-cost", employeeComments: "Implemented additional efficiency measures.", supervisorComments: "", thirdEyeComments: "Proactive approach to cost management.", status: "approved" },
        october: { achievement: "10", url: "https://company.com/evidence/oct-cost", employeeComments: "Achieved target through process optimization.", supervisorComments: "", thirdEyeComments: "Effective process improvements.", status: "approved" },
        november: { achievement: "9", url: "https://company.com/evidence/nov-cost", employeeComments: "Maintained cost control during budget planning.", supervisorComments: "", thirdEyeComments: "Good fiscal discipline.", status: "pending" },
        december: { achievement: "10", url: "https://company.com/evidence/dec-cost", employeeComments: "Ended year with optimal cost structure.", supervisorComments: "", thirdEyeComments: "Excellent year-end cost management.", status: "approved" }
      }
    },
    3: {
      kra: "Performance",
      kpi: "Profit Margin",
      weightage: "20",
      targetDetails: "Achieve 22% profit margin",
      target: "22",
      achievement: "21",
      achievementPercent: "95%",
      score: "19",
      isTargeted: true,
      monthlyData: {
        january: { achievement: "20", url: "https://company.com/evidence/jan-profit", employeeComments: "Close to target profit margin.", supervisorComments: "", thirdEyeComments: "Good progress towards target.", status: "pending" },
        february: { achievement: "21", url: "https://company.com/evidence/feb-profit", employeeComments: "Achieved profit margin target.", supervisorComments: "", thirdEyeComments: "Target achieved successfully.", status: "approved" },
        march: { achievement: "20", url: "https://company.com/evidence/mar-profit", employeeComments: "Slight dip due to increased costs.", supervisorComments: "", thirdEyeComments: "Minor setback, but still close to target.", status: "pending" },
        april: { achievement: "21", url: "https://company.com/evidence/apr-profit", employeeComments: "Back to target profit margin.", supervisorComments: "", thirdEyeComments: "Good recovery.", status: "approved" },
        may: { achievement: "22", url: "https://company.com/evidence/may-profit", employeeComments: "Exceeded profit margin target.", supervisorComments: "", thirdEyeComments: "Outstanding performance.", status: "approved" },
        june: { achievement: "21", url: "https://company.com/evidence/jun-profit", employeeComments: "Maintaining strong profit margin.", supervisorComments: "", thirdEyeComments: "Consistently good performance.", status: "approved" },
        july: { achievement: "22", url: "https://company.com/evidence/jul-profit", employeeComments: "Strong profit performance in Q3.", supervisorComments: "", thirdEyeComments: "Excellent quarterly results.", status: "approved" },
        august: { achievement: "23", url: "https://company.com/evidence/aug-profit", employeeComments: "Record profit margin achieved.", supervisorComments: "", thirdEyeComments: "Exceptional performance this month.", status: "approved" },
        september: { achievement: "22", url: "https://company.com/evidence/sep-profit", employeeComments: "Maintained high profit margins.", supervisorComments: "", thirdEyeComments: "Consistent strong performance.", status: "approved" },
        october: { achievement: "21", url: "https://company.com/evidence/oct-profit", employeeComments: "Slight adjustment but still above target.", supervisorComments: "", thirdEyeComments: "Good performance maintaining targets.", status: "approved" },
        november: { achievement: "22", url: "https://company.com/evidence/nov-profit", employeeComments: "Back to optimal profit levels.", supervisorComments: "", thirdEyeComments: "Effective profit management.", status: "pending" },
        december: { achievement: "24", url: "https://company.com/evidence/dec-profit", employeeComments: "Record year-end profit margin.", supervisorComments: "", thirdEyeComments: "Outstanding year-end performance.", status: "approved" }
      }
    },
    4: {
      kra: "Customer Satisfaction",
      kpi: "NPS Score",
      weightage: "15",
      targetDetails: "Financial reporting process documentation",
      target: "N/A",
      achievement: "Very Good",
      achievementPercent: "100%",
      score: "15",
      isTargeted: false,
      monthlyData: {
        january: { achievement: "Good", url: "https://company.com/evidence/jan-nps", employeeComments: "Documentation completed as per schedule.", supervisorComments: "", thirdEyeComments: "Satisfactory work on documentation.", status: "approved" },
        february: { achievement: "Very Good", url: "https://company.com/evidence/feb-nps", employeeComments: "Improved documentation quality.", supervisorComments: "", thirdEyeComments: "Noticeable improvement in quality.", status: "approved" },
        march: { achievement: "Excellent", url: "https://company.com/evidence/mar-nps", employeeComments: "Received positive feedback on documentation.", supervisorComments: "", thirdEyeComments: "Excellent work this month.", status: "approved" },
        april: { achievement: "Very Good", url: "https://company.com/evidence/apr-nps", employeeComments: "Maintained high documentation standards.", supervisorComments: "", thirdEyeComments: "Consistently good quality.", status: "approved" },
        may: { achievement: "Excellent", url: "https://company.com/evidence/may-nps", employeeComments: "Exceeded documentation expectations.", supervisorComments: "", thirdEyeComments: "Outstanding documentation work.", status: "approved" },
        june: { achievement: "Very Good", url: "https://company.com/evidence/jun-nps", employeeComments: "Consistent high-quality documentation.", supervisorComments: "", thirdEyeComments: "Reliably good performance.", status: "approved" },
        july: { achievement: "Excellent", url: "https://company.com/evidence/jul-nps", employeeComments: "Implemented new documentation standards.", supervisorComments: "", thirdEyeComments: "Innovative approach to documentation.", status: "approved" },
        august: { achievement: "Excellent", url: "https://company.com/evidence/aug-nps", employeeComments: "Maintained exceptional documentation quality.", supervisorComments: "", thirdEyeComments: "Consistently excellent work.", status: "approved" },
        september: { achievement: "Very Good", url: "https://company.com/evidence/sep-nps", employeeComments: "Updated documentation for new processes.", supervisorComments: "", thirdEyeComments: "Good adaptation to changes.", status: "approved" },
        october: { achievement: "Excellent", url: "https://company.com/evidence/oct-nps", employeeComments: "Streamlined documentation process.", supervisorComments: "", thirdEyeComments: "Efficient process improvements.", status: "approved" },
        november: { achievement: "Very Good", url: "https://company.com/evidence/nov-nps", employeeComments: "Prepared year-end documentation.", supervisorComments: "", thirdEyeComments: "Thorough year-end preparation.", status: "pending" },
        december: { achievement: "Excellent", url: "https://company.com/evidence/dec-nps", employeeComments: "Completed annual documentation review.", supervisorComments: "", thirdEyeComments: "Comprehensive year-end documentation.", status: "approved" }
      }
    },
    5: {
      kra: "Customer Satisfaction",
      kpi: "Customer Retention",
      weightage: "10",
      targetDetails: "Maintain customer retention rate of 85%",
      target: "85",
      achievement: "82",
      achievementPercent: "96%",
      score: "9.6",
      isTargeted: true,
      monthlyData: {
        january: { achievement: "80", url: "https://company.com/evidence/jan-retention", employeeComments: "Slightly below target but improving.", supervisorComments: "", thirdEyeComments: "Acceptable given market conditions.", status: "pending" },
        february: { achievement: "82", url: "https://company.com/evidence/feb-retention", employeeComments: "Improved retention rate this month.", supervisorComments: "", thirdEyeComments: "Good improvement trend.", status: "approved" },
        march: { achievement: "83", url: "https://company.com/evidence/mar-retention", employeeComments: "Exceeded retention target.", supervisorComments: "", thirdEyeComments: "Excellent performance on retention.", status: "approved" },
        april: { achievement: "81", url: "https://company.com/evidence/apr-retention", employeeComments: "Slight dip but still close to target.", supervisorComments: "", thirdEyeComments: "Minor fluctuation, still acceptable.", status: "pending" },
        may: { achievement: "84", url: "https://company.com/evidence/may-retention", employeeComments: "Strong recovery on retention rate.", supervisorComments: "", thirdEyeComments: "Impressive recovery and performance.", status: "approved" },
        june: { achievement: "85", url: "https://company.com/evidence/jun-retention", employeeComments: "Achieved exact retention target.", supervisorComments: "", thirdEyeComments: "Perfect achievement of target.", status: "approved" },
        july: { achievement: "86", url: "https://company.com/evidence/jul-retention", employeeComments: "Exceeded retention targets with new initiatives.", supervisorComments: "", thirdEyeComments: "Excellent results from new programs.", status: "approved" },
        august: { achievement: "85", url: "https://company.com/evidence/aug-retention", employeeComments: "Maintained strong retention rates.", supervisorComments: "", thirdEyeComments: "Consistent performance meeting targets.", status: "approved" },
        september: { achievement: "87", url: "https://company.com/evidence/sep-retention", employeeComments: "Record high retention rate achieved.", supervisorComments: "", thirdEyeComments: "Outstanding retention performance.", status: "approved" },
        october: { achievement: "86", url: "https://company.com/evidence/oct-retention", employeeComments: "Maintained excellent retention levels.", supervisorComments: "", thirdEyeComments: "Strong ongoing performance.", status: "approved" },
        november: { achievement: "85", url: "https://company.com/evidence/nov-retention", employeeComments: "Met targets during challenging period.", supervisorComments: "", thirdEyeComments: "Good resilience in difficult market.", status: "pending" },
        december: { achievement: "88", url: "https://company.com/evidence/dec-retention", employeeComments: "Ended year with best retention rate ever.", supervisorComments: "", thirdEyeComments: "Exceptional year-end performance.", status: "approved" }
      }
    }
  };

  // Modal functionality
  const modal = document.getElementById('kpiReviewModal');
  const closeModal = document.getElementById('closeModal');
  const detailsButtons = document.querySelectorAll('.details-btn');
  const modalKpiDetails = document.getElementById('modalKpiDetails');
  const monthlyProgress = document.getElementById('monthlyProgress');

  // Open modal when details button is clicked
  detailsButtons.forEach(button => {
    button.addEventListener('click', function () {
      const kpiId = this.getAttribute('data-kpi-id');
      const kpi = kpiData[kpiId];

      // Populate modal with KPI details
      modalKpiDetails.innerHTML = `
            <tr>
              <td class="px-2 py-2 text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                <div>${kpi.kra}</div>
                <div class="font-medium">${kpi.kpi}</div>
              </td>
              <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                ${kpi.weightage}
              </td>
              <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                ${kpi.targetDetails}
              </td>
              <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                ${kpi.target}
              </td>
              <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                ${kpi.achievement}
              </td>
              <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                ${kpi.achievementPercent}
              </td>
              <td class="px-2 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
                ${kpi.score}
              </td>
            </tr>
          `;

      // Populate monthly progress table
      let monthlyHtml = '';
      const months = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];
      
      months.forEach(month => {
        const monthData = kpi.monthlyData[month];
        if (!monthData) return; // Skip if no data for this month
        
        const monthName = month.charAt(0).toUpperCase() + month.slice(1);
        
        // Determine input type based on whether KPI is targeted
        let achievementInput = '';
        if (kpi.isTargeted) {
          achievementInput = `<input type="text" class="score-input dark:bg-gray-700 dark:text-gray-200 w-full" value="${monthData.achievement}">`;
        } else {
          const options = ['Excellent', 'Very Good', 'Good', 'Average'];
          let optionsHtml = '';
          options.forEach(option => {
            const selected = option === monthData.achievement ? 'selected' : '';
            optionsHtml += `<option value="${option}" ${selected}>${option}</option>`;
          });
          achievementInput = `<select class="score-input dark:bg-gray-700 dark:text-gray-200 w-full">${optionsHtml}</select>`;
        }
        
        // Determine status badge
        let statusBadge = '';
        if (monthData.status === 'approved') {
          statusBadge = '<span class="status-badge status-approved">Approved</span>';
        } else if (monthData.status === 'sent-back') {
          statusBadge = '<span class="status-badge status-sent-back">Sent Back</span>';
        } else {
          statusBadge = '<span class="status-badge status-pending">Pending</span>';
        }
        
        monthlyHtml += `
          <tr>
            <td class="px-2 py-2 text-center text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
              ${monthName}
            </td>
            <td class="px-2 py-2 text-center text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
              ${achievementInput}
            </td>
            <td class="px-2 py-2 text-center text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
              <a href="${monthData.url}" target="_blank" class="text-blue-500 hover:underline">View Evidence</a>
            </td>
            <td class="px-2 py-2 text-center text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
              <textarea class="comment-input dark:bg-gray-700 dark:text-gray-200 w-full h-20" readonly>${monthData.employeeComments}</textarea>
            </td>
            <td class="px-2 py-2 text-center text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
              <textarea class="comment-input dark:bg-gray-700 dark:text-gray-200 w-full h-20" placeholder="Enter supervisor comments...">${monthData.supervisorComments}</textarea>
            </td>
            <td class="px-2 py-2 text-center text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
              <textarea class="comment-input dark:bg-gray-700 dark:text-gray-200 w-full h-20" readonly>${monthData.thirdEyeComments}</textarea>
            </td>
            <td class="px-2 py-2 text-center text-sm text-gray-500 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700">
              <div class="flex flex-col gap-1">
                <button class="action-btn send-back-btn bg-yellow-500 hover:bg-yellow-600 text-white" data-month="${month}" data-kpi="${kpiId}">Send Back</button>
                <button class="action-btn approve-btn bg-green-500 hover:bg-green-600 text-white" data-month="${month}" data-kpi="${kpiId}">Approve</button>
                <div class="mt-1">${statusBadge}</div>
              </div>
            </td>
          </tr>
        `;
      });
      
      monthlyProgress.innerHTML = monthlyHtml;
      
      // Add event listeners to the new buttons
      document.querySelectorAll('.send-back-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const month = this.getAttribute('data-month');
          const kpiId = this.getAttribute('data-kpi');
          handleStatusChange(kpiId, month, 'sent-back');
        });
      });
      
      document.querySelectorAll('.approve-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const month = this.getAttribute('data-month');
          const kpiId = this.getAttribute('data-kpi');
          handleStatusChange(kpiId, month, 'approved');
        });
      });

      // Show modal
      modal.style.display = 'flex';
    });
  });

  // Close modal
  closeModal.addEventListener('click', function() {
    modal.style.display = 'none';
  });

  // Close modal when clicking outside
  window.addEventListener('click', function(event) {
    if (event.target === modal) {
      modal.style.display = 'none';
    }
  });

  // Handle status change
  function handleStatusChange(kpiId, month, status) {
    // In a real application, you would send this to a server
    // For now, we'll just update the local data and show an alert
    kpiData[kpiId].monthlyData[month].status = status;
    
    // Update the status badge
    const statusCell = document.querySelector(`button[data-kpi="${kpiId}"][data-month="${month}"]`).closest('td');
    let statusBadge = '';
    if (status === 'approved') {
      statusBadge = '<span class="status-badge status-approved">Approved</span>';
    } else if (status === 'sent-back') {
      statusBadge = '<span class="status-badge status-sent-back">Sent Back</span>';
    } else {
      statusBadge = '<span class="status-badge status-pending">Pending</span>';
    }
    
    // Find and update the status badge in the cell
    const existingBadge = statusCell.querySelector('.status-badge');
    if (existingBadge) {
      existingBadge.outerHTML = statusBadge;
    } else {
      const buttonsContainer = statusCell.querySelector('.flex.flex-col');
      buttonsContainer.innerHTML += statusBadge;
    }
    
    // Show confirmation message
    const monthName = month.charAt(0).toUpperCase() + month.slice(1);
    // alert(`KPI for ${monthName} has been ${status === 'approved' ? 'approved' : 'sent back'}.`);
  }
</script>
</body>
</html>